var e=require("path"),a=require("electron"),o=require("puppeteer"),t=require("cheerio"),r=require("lodash"),i=require("os");function n(e){return e&&e.__esModule?e.default:e}let l=[],c="";const s=n(i).userInfo();switch(n(i).platform()){case"win32":c="C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe";break;case"linux":c=`/home/${s.username}/.cache/puppeteer/chrome/linux-132.0.6834.110/chrome-linux64/chrome`}const d=async e=>{let a=await o.launch({executablePath:c}),i=await a.newPage();await i.setViewport({width:1920,height:1080});try{await i.goto(`https://www.bcb.gov.br/estatisticas/reporttxjuroshistorico?historicotaxajurosdiario_page=1&codigoSegmento=1&codigoModalidade=${e.codModalidade}&tipoModalidade=D&InicioPeriodo=${e.periodo}`),await i.screenshot({path:"./preview.png"}),await i.waitForSelector("table.table tbody",{timeout:1e4});let a=await i.content();if(a){let e=t.load(a),o=[];e("table").find("tbody > tr").each((a,t)=>{e(t).find("> td").each((a,t)=>{let r=e(t).text();o.push(r.replace(" ",""))})}),o.length>0?(0,r.chunk)(o,4).forEach(e=>{l?.push({position:e[0],bankName:e[1],monthlyRate:e[2],annualRate:e[3]})}):console.log("Falha ao buscar os dados, tente novamente.")}}catch(e){console.log(e)}await a.close()};var h=async e=>{await d(e);let a=0,o=0;return Object.keys(l).forEach((e,o)=>{let t=parseFloat(l[o].monthlyRate.replace(",","."));a+=t}),o=Math.floor(a/l.length*100)/100,console.log({total:a,numeroDeBancos:l.length,media:o}),l=[],Math.floor(100*o)/100},p=e.resolve(__dirname,"../src");const u=n(e).join(p,"../_electron/"),w=()=>{new a.BrowserWindow({width:1280,height:720,maximizable:!0,center:!0,icon:"../images/logo.ico",roundedCorners:!0,webPreferences:{preload:u+"preload.js"}}).loadFile(u+"static/index.html")};(0,a.app).whenReady().then(()=>{w(),(0,a.app).on("activate",()=>{0===(0,a.BrowserWindow).getAllWindows().length&&w()})}),(0,a.ipcMain).handle("fetchBCB",async(e,a)=>{let o=await h(a);if(o)return o;throw Error("Falha ao buscar os dados no Banco Central.")}),(0,a.app).on("window-all-closed",()=>{"darwin"!==process.platform&&(0,a.app).quit()});
//# sourceMappingURL=main.js.map
